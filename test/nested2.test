def fn(x) = 
  def fna(i) = 
    def fnb(j) = i - j
    -> fnb(i/2) + 1
  -> 1/(x<=0) ; fna(x) + fn(x-1)

-> fn(4)

{*
x | fn(x) | fna(x)
--+-------+-------
0 |   1   |   1
1 |  2.5  |  1.5
2 |  4.5  |   2
3 |   7   |  2.5
4 |  10.  |   3
*}
